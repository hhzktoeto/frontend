<form [formGroup]="form" (ngSubmit)="addTransaction()">
    <div class="grid grid-cols-1 md:grid-cols-4">
        <div class="md:col-span-4">
            <div class="flex items-center justify-between">
                <h3 class="text-xl text-light-1 mb-4 cursor-default">Добавить транзакцию</h3>
                <span class="flex justify-end text-xs text-purple mb-4 cursor-default">* Обязательное поле</span>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-4 gap-2">
                <mat-form-field>
                    <mat-label>Тип</mat-label>
                    <mat-select [formControl]="form.controls.type">
                        <mat-option [value]="TransactionType.EXPENSE">Расход</mat-option>
                        <mat-option [value]="TransactionType.INCOME">Доход</mat-option>
                    </mat-select>
                </mat-form-field>

                <mat-form-field>
                    <mat-label>Категория</mat-label>
                    <input matInput list="categories"
                           [formControl]="form.controls.category">
                    <datalist id="categories">
                        @for (category of categoriesSig(); track category.id) {
                            <option [value]="category.name"></option>
                        }
                    </datalist>
                </mat-form-field>

                <mat-form-field>
                    <mat-label>Сумма</mat-label>
                    <input matInput
                           [formControl]="form.controls.amount"
                           type="number" min="0" placeholder="0.00">
                </mat-form-field>

                <mat-form-field>
                    <mat-label>Дата</mat-label>
                    <input matInput
                           [matDatepicker]="picker"
                           [formControl]="form.controls.date">
                    <mat-datepicker-toggle matIconSuffix [for]="picker"></mat-datepicker-toggle>
                    <mat-datepicker #picker></mat-datepicker>
                </mat-form-field>

                <mat-form-field class="col-span-4">
                    <mat-label>Описание</mat-label>
                    <input matInput
                           [formControl]="form.controls.description">
                </mat-form-field>
            </div>
        </div>
    </div>

    <div class="flex justify-end mt-6 gap-4">
        @if (errorMessage()) {
            <div class="p-2 text-red rounded text-sm bg-transparent">
                {{ errorMessage() }}
            </div>
        }
        <button type="submit"
                class="px-5 py-3 text-lg outline-none rounded-lg text-light-1 bg-blue-4 hover:bg-blue-2 text-light-3 transition-colors duration-200">
            @if (isLoading()) {
                <span>Добавление...</span>
            } @else {
                <span>Добавить</span>
            }
        </button>
    </div>
</form>
